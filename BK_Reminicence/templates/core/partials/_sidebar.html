<aside class="sidebar">
    <nav class="sidebar-nav">
        <ul>
            <!-- ENLACE DE INICIO ACTUALIZADO CON HTMX -->
            <li>
                <a href="{% url 'core:index' %}" 
                   hx-get="{% url 'core:index' %}"
                   hx-target="#main-content"
                   hx-push-url="true">
                   <i class="fas fa-home"></i> <span>Inicio</span>
                </a>
            </li>
        </ul>
    </nav>

    <div class="library">
        <div class="library-header">
            <button class="library-button"><i class="fas fa-book"></i> <span>Tu biblioteca</span></button>
            <button class="icon-button"><i class="fas fa-plus"></i></button>
        </div>
        <div class="library-filters">
            <span class="chip">Playlists</span>
        </div>
        <div class="library-content">
            <ul class="playlist-list">
                {% if spotify_connected %}
                    {% for playlist in user_playlists %}
                    <li class="playlist-item song-item" data-spotify-uri="{{ playlist.uri }}">
                        <!-- ENLACE DE PLAYLIST ACTUALIZADO CON HTMX -->
                        <a href="{% url 'music:playlist_detail' playlist.id %}" 
                           hx-get="{% url 'music:playlist_detail' playlist.id %}"
                           hx-target="#main-content"
                           hx-push-url="true"
                           style="display: flex; align-items: center; text-decoration: none; color: inherit; width: 100%;">
                            <img src="{{ playlist.image|default:'https://via.placeholder.com/48' }}" alt="{{ playlist.name }}">
                            <div class="playlist-info">
                                <span class="playlist-name">{{ playlist.name }}</span>
                                <span class="playlist-details">{{ playlist.type }} â€¢ {{ playlist.owner }}</span>
                            </div>
                        </a>
                    </li>
                    {% empty %}
                    <li class="playlist-item"><p style="color: #b3b3b3; padding: 1rem;">No se encontraron playlists</p></li>
                    {% endfor %}
                {% else %}
                    <li class="playlist-item" style="padding: 1rem;">
                        <p style="color: #b3b3b3; margin-bottom: 0.5rem;">Conecta tu cuenta de Spotify</p>
                        <a href="{% url 'spotify_api:spotify_login' %}" style="color: #1db954; text-decoration: underline;">Conectar Spotify</a>
                    </li>
                {% endif %}
            </ul>
        </div>
    </div>
</aside>