<!-- core/templates/core/partials/_top_bar.html (ACTUALIZADO) -->

<header class="top-bar">
    <div class="nav-arrows">
        <!-- BOTÓN ATRÁS: Añadimos onclick y quitamos 'disabled' -->
        <button class="icon-button" onclick="history.back()">
            <i class="fas fa-chevron-left"></i>
        </button>
        
        <!-- BOTÓN ADELANTE: Añadimos onclick -->
        <button class="icon-button" onclick="history.forward()">
            <i class="fas fa-chevron-right"></i>
        </button>
    </div>
    
    <div class="search-bar">
        <i class="fas fa-search"></i>
        <input type="text"
            name="q"
            placeholder="¿Qué quieres reproducir?"
            hx-get="{% url 'music:search' %}"
            hx-trigger="keyup changed delay:500ms"
            hx-target="#main-content"
            hx-push-url="true">
    </div>
    
    <div class="user-profile">
        <button class="icon-button notification-button">
            <i class="fas fa-bell"></i>
            <span class="notification-badge">3</span>
        </button>
        
        <button class="icon-button">
            <i class="fas fa-users"></i>
        </button>
        
        {% if user.is_authenticated %}
            <div class="profile-dropdown">
                <a href="{% url 'users:settings' %}" class="profile-pic" title="{{ user.username }}">
                    {% if user_profile and user_profile.image %}
                        <img src="{{ user_profile.image }}" alt="{{ user.username }}" class="profile-img">
                    {% else %}
                        {{ user.username.0|upper }}
                    {% endif %}
                </a>
            </div>
        {% else %}
            <a href="{% url 'users:login' %}" class="profile-pic" title="Iniciar sesión">
                <i class="fas fa-user"></i>
            </a>
        {% endif %}
    </div>
</header>